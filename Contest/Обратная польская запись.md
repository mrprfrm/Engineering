---
tags:
 - contest
 - stack
---

Входное математическое выражение необходимо привести к виду обратной постфиксной записи или, как её ещё называют, **обратной польской записи**.

**Примеры**

```Python
"1+2+3"         # Выражение в обратной польской записи 123++
"6/2*(2+1)"     # Выражение в обратной польской записи 62/21+*
"9+5*(4+2*3)"   # Выражение в обратной польской записи 95423*+*+
"3+5*(7+4*1)*6" # Выражение в обратной польской записи 35741*+*6*+
```

## Решение

Согласно правилам вычисления выражения в обратной польской записи, операция всегда производится над двумя операндами слева от неё, a результат операции помещается на место операндов с операцией.

> TODO: add picture for revers polish notation 

Исходя из вышеописанного, преобразование прямой инфиксной записи в обратную постфиксную будет происходить через перебор всех символов в исходном выражении и будет подчиняться правилам:

- Если текущий элемент — это число, то мы сразу возвращаем его в ответ;
- Иначе, если текущий элемент — это операция или скобка, то мы будем помещать либо изымать его из [[Стеки, очереди, деки#^8b5d53|стека]] согласно правилам:
	- Если элемент — это операция и она имеет в стеке операции с большим либо равным приоритетом — "выталкиваем" эти операции в ответ и помещаем текущую операцию в стек;
	- Если элемент — это открывающая скобка — помещаем её в стек;
	- Если элемент — это закрывающая скобка — "выталкиваем" из стека в ответ все операции до открывающей скобки;
	- Если элемент — это операция и она не имеет в стеке  операция с большим либо равным приоритетом — помещаем её в стек.

> TODO: add the solution

## Список источников

1. [Обратная польская запись](https://ru.wikipedia.org/wiki/Обратная_польская_запись)