![[queens_puzzle.png]]
Вероятно, что многие из вас играли в шахматы. Поэтому вы знаете, что ферзь может двигаться по горизонталям, вертикалям и диагоналям.

Вася недавно начал заниматься шахматами и где-то прочел головоломку, в которой нужно было расставить максимальное количество ферзей на доске 8х8 так, чтобы хотя бы одно поле оказалось небитым. Эта задача легко решается для доски 3х3, т.к. понятно, что более двух ферзей расставить таким образом на ней невозможно.

Помогите Васе решить эту задачу для доски N×N.

```Python
n = 3 # Допустимо разместить 2 ферзя
n = 4 # Допустимо разместить 6 ферзей
n = 5 # Допустимо разместить 12 ферзей
n = 2 # Допустимо разместить 0 ферзей
```

## Решение

Исходя из того, что фигура ферзя может ходить на всю длину доски по горизонтали, вертикали и диагонали, нам необходимо определить количество клеток на доске, откуда у размещённых на доске ферзей будет доступ в правый верхний угол доски, и затем вычесть количество таких клеток из общего количества клеток на доске.

> В данном случае мы определили правый верхний угол доски как наиболее оптимальную клетку, что позволит нам разместить максимальное количество ферзей на доске, не имеющих к ней доступа, однако угол ни доске может быть любым.

Для того чтобы исключить клетки, куда фигура ферзя может добраться, достаточно разместить в клетку в правом, верхнем углу фигуру ферзя и таким образом все клетки куда этот ферзь сможет добраться и станет множеством клеток, что нам следует исключить.

Количество таких клеток можно рассчитать по формуле:

```Python
m = (n - 1) * 3 - 1
```

В случае с ферзём нам необходимо исключить все клетки лежащие верхней и правой границах доски, а также клетки лежащие на диагонали доски.

Максимальное количество ферзей размещённых на доске и удовлетворяющих условию задачи будет равно:

```Python
k = n * n - m
k = n * n - (n - 1) * 3 - 1
```


## Пример решения

```Python
def queens_puzzle(n):
	return n * n - (n - 1) * 3 - 1
```