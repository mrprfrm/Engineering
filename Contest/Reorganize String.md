![[reorganize_string.png]]

Дана строка `s`, необходимо вернуть любую возможную перестановку символов в строке, чтобы в результате не встречались две и более одинаковых букв стоящих рядом, в противном случае вернуть пустую строку.

## Решение

В данном случае нам понадобится учитывать наиболее встречаемые символы и комбинировать их со всеми прочими.

Сперва нам нужно определить частоту каждого из символов в строке, далее нам необходимо отсортировать символы по частоте, и уже затем извлечь из строки два символа с максимальной частотой и поместить их в ответ.

От итерации к итерации символ с наивысшей частотой может изменяться, ведь в процессе формирования ответа мы извлекаем символы из строки, согласно условию выше.

Чтобы не сортировать весь массив оставшихся символов по частоте, воспользуемся структурой куча. На каждой итерации итерации мы будем извлекать из кучи два символа с максимальной частотой и добавлять их комбинацию в результат.

Обход кучи мы будем вести до тех пор, пока в ней не останется только один элемент, чтобы избежать ошибки в процессе извлечения второго символа с максимальной частотой.

В случае, если по окончании обхода в куче не осталось символов, мы возвращаем результат, иначе проверяем количество оставшихся дубликатов символа в куче и если оно не превышает одного, то возвращаем результат и дополняем его оставшимся символом, если превышает, возвращаем пустую строку. 

```Python
def reorganize_string(self, s: str) -> str:
	result = ""
	heap = [(-v, k) for k, v in Counter(s).items()]
	heapq.heapify(heap)
	while len(heap) > 1:
		v1, c1 = heapq.heappop(heap)
		v2, c2 = heapq.heappop(heap)
		result += c1 + c2
		v1, v2 = v1 + 1, v2 + 1
		if v1 < 0:
			heapq.heappush(heap, (v1, c1))
		if v2 < 0:
			heapq.heappush(heap, (v2, c2))
	if not heap:
		return result
	if heap[0][0] < -1:
		return ""
	return result + heap[0][1]
```

## Список источников

- [767. Reorganize String (LeetCode)](https://leetcode.com/problems/reorganize-string/)