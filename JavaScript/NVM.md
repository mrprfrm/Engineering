---
tags:
 - node
 - tools
---

`nvm` — это менеджер версий `node.js`, он используется для управления установленными версиями `node`. Исключительно полезный инструмент для работы с проектами, в зависимостях которых фигурируют различные версии `node`.

## Установка NVM

Установить `nvm` можно через терминал используя `curl`:

```Zsh
$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
```

Или `wget`:

```Zsh
$ wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash
```

После завершения установки `nvm` следует закрыть терминал, чтобы изменил вступили в силу при следующем его запуске. Также нам понадобится добавить несколько строк в загрузочный файл нашего `bash`. Это могут быть `.bashrc`, `.bash_profile` или `.zshrc` в зависимости от нашей операционной системы.

*~/.zshrc*

```Zsh
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
```

Удостовериться в доступности `nvm` внутри терминала можно вызвав текущую установленную версию `nvm`.

```Zsh
$ nvm --version
0.34.0
```

Теперь, при помощи `nvm` мы можем установить сразу несколько версий `node`.

## Установка нескольких версий node

Теперь, имея установленный и рабочий `nvm` можно установить интересующие нас версии `node`.

```Zsh
$ nvm install 18.16.0
```

В процессе `nvm` загрузит и установит соответствующую версию `node`, на которую можно будет переключаться в любое удобное время, но об этом позже. 

Процесс загрузки версии `node`, `nvm` будет выводить в терминал, после чего сразу переключит текущую версию `node` на вновь установленную.

```Zsh
Downloading and installing node v18.16.0...
Downloading https://nodejs.org/dist/v18.16.0/node-v18.16.0-darwin-x64.tar.xz...
######################################################################### 100.0%
Computing checksum with shasum -a 256
Checksums matched!
Now using node v18.16.0 (npm v9.5.1)
```

Удостовериться в успешном завершении установки новой версии `node` можно вызвав установленную версию `node` в терминал.

```Zsh
$ node -v
v18.16.0
```

Теперь, после завершения установки нужных версий `node` мы можем получить доступ к их общему списку.

## Список установленных версий node

Имея установленными в систему несколько версий `node` мы можем вывести весь их список.

```Zsh
$ nvm ls
```

Вывод результата выполнения команды может выглядеть следующим образом.

```Zsh
->     v18.16.0
         system
default -> system
node -> stable (-> v18.16.0) (default)
stable -> 18.16 (-> v18.16.0) (default)
iojs -> N/A (default)
unstable -> N/A (default)
lts/* -> lts/hydrogen (-> N/A)
lts/argon -> v4.9.1 (-> N/A)
lts/boron -> v6.17.1 (-> N/A)
lts/carbon -> v8.17.0 (-> N/A)
lts/dubnium -> v10.24.1 (-> N/A)
lts/erbium -> v12.22.12 (-> N/A)
lts/fermium -> v14.21.3 (-> N/A)
lts/gallium -> v16.20.2 (-> N/A)
lts/hydrogen -> v18.17.1 (-> N/A)
```

В данном случае `->` указывает на текущую версию `node`, а `default ->` указывает на версию по умолчанию. Версия по умолчанию будет использоваться для каждой новой сессии терминала. `system` версия `node` — это версия установленная в системе, за рамками `nvm`.

> Как правило, `system` — это версия `node` установленная до установки `nvm`.

## Версия node по умолчанию

Как правило, по умолчанию `nvm` использует последнюю стабильную установленную версию `node`, однако в случае если такая версия по умолчанию нас не устраивает мы можем её переопределить.

```Zsh
$ nvm alias default stable
default -> stable (-> v18.16.0)
```

Также возможно определить в качестве версии по умолчанию `system` версию.

```Zsh
$ nvm alias default system
default -> system
```

`nvm` также позволяет переключаться между версиями `node` без переопределения `node` по умолчанию.

## Переключение версий node

Для переключения текущей версии `node` в контексте `nvm` используется команда `use`.

```Zsh
$ nvm use 18.16.0
Now using node v18.16.0 (npm v9.5.1)
```

Мы также можем переключиться обратно на версию `node` по умолчанию.

```Zsh
$ nvm use default
Now using system version of node: v20.3.0 (npm v9.6.7)
```

Также, в случае если какие либо из версий `node` больше не являются актуальными для использования, `nvm` позволяет их удалить.

## Удаление версий node

Для удаления установленных версий `node` можно воспользоваться командой `uninstall`.

```Zsh
$ nvm uninstall 18
Uninstalled node v18.16.0
```

К сожалению, если мы попробуем удалить версию `node` использую только её мажорную часть, `nvm` удалит только последнюю версию, в контексте мажорной версии.

Поэтому если мы имеем несколько минорных версий в контексте мажорной, нам придётся удалять каждую их них в отдельности.

Например если мы имеем несколько минорных версий в контексте `node` версии 6.

```Zsh
$ nvm uninstall 6
Uninstalled node v6.14.4

$ nvm uninstall 6
Uninstalled node v6.10.3
```

Также следует заметить, что удалить версию `node`, используемую в текущий момент невозможно.

`nvm` также позволяет удалить себя перманентно и вернуться к использованию `node` установленной в системе.

## Удаление nvm

В случае если мы решили полностью удалить все версии `node` и вместе с тем удалить сам `nvm`, мы можем воспользоваться командой `unload`

```Zsh
$ nvm unload
```

В случае если удаление `nvm` не требуется, но необходимо вернуться к использованию системной версии `node`, как мы упоминали ранее, можно просто на неё переключиться.

```Zsh
$ nvm use system
Now using system version of node: v20.3.0 (npm v9.6.7)
```

Теперь в текущей сессии терминала нам будет доступна версия `node` установленная за рамками `nvm`.
## Список источников

- [How To Run Multiple Versions of Node.js with Node Version Manager (DigitalOcean)](https://www.digitalocean.com/community/tutorials/nodejs-node-version-manager)