---
aliases:
  - Python interpreter
author:
  - Anton Petrov
last updated: 2023-09-22
related:
  - "[[Язык программирования Python|Python]]"
Spell checked: true
tags:
  - python
  - interpreter
version: 0.1.0
---
## Запуск интерпретатора

Интерпретатор Python обычно устанавливается  в директорию `/usr/local/bin/python3.11` на тех машинах, где он доступен; Поместив `/usr/local/bin` в search PATH вашей оболочки Unix, вы сможете запустить его, введя команду:

```Zsh
$ python3.11
```

Поскольку выбор директории для установки Python является опцией установки, возможны и другие места куда будет установлен Python, к примеру, `/usr/local/python` — одно из таких мест.

Ввод символа `EOF` (`Control-D` в Unix, `Control-Z` в Windows) в первичный промпт (primary prompt) приводит к завершению работы интерпретатора с `zero exit status`. Если это не сработает, можно попробовать выйти из интерпретатора, введя команду `quit()`.

Построчное редактирование интерпретатора поддерживает функции интерактивного редактирования (interactive editing), замены истории (history substitution) и автодополнения (code completion), однако только в случае если система в которой запущен интерпретатор поддерживается библиотека [GNU Readline](https://tiswww.case.edu/php/chet/readline/rltop.html).

Интерпретатор работает примерно, как командная оболочка Unix: при вызове со стандартным вводом, подключенным к устройству tty, он считывает и выполняет команды в интерактивном режиме, а если аргументом передать имя Python-файла  имени файла или передать файл в качестве стандартного ввода интерпретатор выполнит скрипт описанный внутри него такого файла.

Существует и иной способ выполнения программ на Python, можно передать выражение прямо в аргументе при запуске интерпретатора: `python -c [arg] ...`, где `-c`, по аналогии с аргументом командной оболочки, — это сокращение от `command`. Поскольку, зачастую, выражения на Python содержат пробелы и другие специальные для командной оболочки символы, рекомендуется оборачивать передаваемое выражение в кавычки.

Некоторые модули Python также могут содержать выражения, что можно запустить как любой прочий скрипт. Сделать это можно, передав имя модуля в аргументе при запуске интерпретатора: `python -m [arg] ...`, в этом случае интерпретатор выполнит содержащийся в модуле скрипт, как если бы мы передали в аргументе интерпретатора его полное имя.

Исключительно полезным может быть переход в интерактивный режим интерпретатора по окончании выполнения скрипта, сделать это можно используя специальный ключ `-i` перед скриптом `python -i [-c command | -m module_name | script | - ] [args]`.

Список остальных опций интерпретатора приведён здесь: [[Командная строка и окружение]].

### Аргументы интерпретатора

Когда на вход интерпретатору передаются имя сценария и дополнительные аргументы, они автоматически преобразуются в список строк и сохраняются в переменной `argv` модуля `sys`. Получить доступ к этому списку можно через модуль `sys`: `import sys`. Список аргументов интерпретатора всегда включает в себя минимум один элемент. Если ни имя сценария, ни аргументы не были переданы, `sys.argv[0]` будет представлять собой пустую строку. 

В случае запуска интерпретатора в режиме стандартного ввода: `python -`, `sys.argv[0]` примет значение `-`. Если интерпретатор запускается в режиме обработки команды: `python -c command`, `sys.argv[0]` будет равно `-c`. А если интерпретатор запускается в режиме выполнения модуля: `python -m module`, то в `sys.argv[0]` будет содержаться полное имя найденного модуля. Опции, переданные после `-c command` или `-m module` не влияют на работу интерпретатора, но также будут доступны в `sys.argv` для последующей обработки командой или модулем.

### Интерактивный режим

Когда команды вводятся непосредственно через `tty`, говорят, что интерпретатор находится в интерактивном режиме. В этом режиме он запрашивает следующую команду в основной промпт, обычно обозначенный тремя знаками "больше-меньше": `>>>`. Для ввода дополняющих выражений (continuation lines), интерпретатор предлагает вторичный промпт, который, как правило, обозначен тремя точками: `...`. После запуска интерпретатора в интерактивном режиме в терминале отобразится информация о его версии, а также небольшое пояснение о доступных командах, а затем появится первичный промпт.

```Zsh
$ python3
Python 3.11.4 (main, Jul 25 2023, 17:07:07) [Clang 14.0.3 (clang-1403.0.22.14.1)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

Упомянутые дополняющие выражения (continuation lines) применяются для ввода вложенных, многострочных конструкций. Например, для описания циклов или условий.

```Zsh
>>> the_world_is_flat = True
>>> if the_world_is_flat:
...     print("Be careful not to fall off!")
...
Be careful not to fall off!
```

## Интерпретатор и его окружение

### Кодировки исходного кода

По умолчанию, исходные файлы Python используют кодировку `UTF-8`. Эта кодировка поддерживает символы большинства естественных языков мира, что позволяет использовать эти языки в строках, идентификаторах и комментариях. Однако стандартная библиотека использует исключительно символы ASCII в качестве идентификаторов. Это соглашение обусловлено требованием к переносимости кода.

Важно отметить, что для правильного отображения всех символов, поддерживаемых `UTF-8`, в вашем текстовом редакторе, редактор должен поддерживать эту кодировку, а также использовать соответствующий шрифт, поддерживающий `UTF-8`.

Чтобы переопределить кодировку по умолчанию, вы можете добавить специальный комментарий в первой строке файла:

```Python
# -*- coding: encoding -*-
```

где `encoding` - это одна из валидных кодировок, поддерживаемых Python. Полный список таких кодировок можно найти в модуле [codecs](https://docs.python.org/3/library/codecs.html#module-codecs).

Например, объявить, что в файле будет использоваться кодировка Windows-1252, добавьте следующий комментарий:

```Python
# -*- coding: cp1252 -*-
```

Существует также исключение, когда первой строкой в файле указывается [строка UNIX «shebang»](https://docs.python.org/3/tutorial/appendix.html#tut-scripts). В этом случае кодировка указывается второй строкой.

```Python
#!/usr/bin/env python3
# -*- coding: cp1252 -*-
```

## Список источников

- [Using the Python Interpreter](https://docs.python.org/3/tutorial/interpreter.html)