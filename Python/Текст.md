---
aliases:
  - Text
authors:
  - Anton Petrov
status: Draft
tags:
  - python
  - string
---
Python также поддерживает текстовый тип данных — строки (`str`) и позволяет выполнять операции над ними.

Строки в Python могут содержать абсолютно любые [[#^187c76|строковые литералы]]: буквы, слова, имена собственные, предложения, знаки препинания, числа и т.д. Также Python позволяет использовать для определения строк как двойные (`""`) так и одиночные (`''`) кавычки:

```python
>>> 'spam eggs'  # одиночные кавычки
'spam eggs'
>>> "Paris rabbit got your back :)! Yay!"  # двойные кавычки
'Paris rabbit got your back :)! Yay!'
>>> '1975'  # цифры и числа, заключённые в кавычки, также являются строками
'1975'
```

### Форматирование строк

Чтобы поместить кавычки внутрь строки в Python мы прежде всего можем использовать разные типы кавычек для объявления строки и внутри неё, но также мы можем экранировать кавычки, если первый вариант нам не подходит. Для этого достаточно добавить символ `\` перед экранируемым символом:

```python
>>> 'doesn\'t'  # используем \' чтобы экранировать кавычку того же типа внутри строки...
"doesn't"
>>> "doesn't"  # ...или используем кавычки разного типа для определения строки и внутри неё
"doesn't"
>>> '"Yes," they said.'
'"Yes," they said.'
>>> "\"Yes,\" they said."
'"Yes," they said.'
>>> '"Isn\'t," they said.'
'"Isn\'t," they said.'
```

В промпте Python определение строки и её вывод в терминал могут отличаться. Функция `print()` обеспечивает более читаемый вывод, она форматирует его согласно экранированным и специальным символам в исходной строке, а также упраздняет заключающие текст кавычки:

```python
>>> s = 'First line.\nSecond line.'  # символ \n означет перенос строки
>>> s  # без вызова функции print(), специальные символы просто выводятся как часть строки
'First line.\nSecond line.'
>>> print(s)  # внутри функции print(), строка форматируется и выводится с учётом специальных символов
First line.
Second line.
```

Если мы хотим обеспечить вывод без форматирования, то есть отобразить специальные символы и экранированные символы как  они указаны в исходной строке, мы можем использовать специальный тип строк (`r"raw string"`):

```python
>>> print('C:\some\name')  # здесь в строке встретился символ \n, что приведёт к разрыву строки
C:\some
ame
>>> print(r'C:\some\name')  # чтобы избежать ненамеренного форматирования передадим "сырую" строку
C:\some\name
```

У "сырых" строк есть один нюанс — они не могут заканчиваться нечетным количеством символов `\`:

```python
>>> r'C:\this\will\not\work\'
  File "<stdin>", line 1
    r'C:\this\will\not\work\'
         ^
SyntaxError: unterminated string literal (detected at line 1)
```

Обойти это ограничение можно экранировав все символы `\` в строке:

```python
>>> 'C:\\this\\will\\work\\'
'C:\\this\\will\\work\\'
```

Строковые литералы в Python могут занимать несколько строк. Определить такой многострочный текст можно используя тройные кавычки: `"""...."""` или `'''...'''`.  Начало и окончание строки (зачастую переносы строк перед и после текста в строке) также включаются в строку, однако предотвратить это можно, `\` в конце строки. Например:

```python
print("""\
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
""")
```

выведет текст:

```python
Usage: thingy [OPTIONS]
     -h                        Display this usage message
     -H hostname               Hostname to connect to
```

> Следует заметить. что пустые строки в начале и в конце строки не включены в вывод.

Python также поддерживает конкатенацию (объединение) строк с помощью оператора сложения, а также повторения строк с помощью оператора умножения:

```python
>>> # выведем 'un' три разв, а затем объединим это с 'ium'
>>> 3 * 'un' + 'ium'
'unununium'
```

Два и долее строковых литерала, расположенные последовательно друг за другом автоматически объединяются:

```python
>>> 'Py' 'thon'
'Python'
```

Эта функция особенно полезна, когда мы хотим разделить длинный текст на набор более компактных строк:

```python
>>> text = ('Put several strings within parentheses '
...         'to have them joined together.')
>>> text
'Put several strings within parentheses to have them joined together.'
```

Однако такой синтаксис поддерживается только для строк, для переменных или иных выражений это вызовет ошибку:

```python
>>> prefix = 'Py'
>>> prefix 'thon'  # автоматическое конкатенация тежду переменными и строками не поддерживается
  File "<stdin>", line 1
    prefix 'thon'
           ^^^^^^
SyntaxError: invalid syntax
>>> ('un' * 3) 'ium'
  File "<stdin>", line 1
    ('un' * 3) 'ium'
               ^^^^^
SyntaxError: invalid syntax
```

Чтобы избежать ошибок для таких случаев, следует определить операцию конкатенации явно, используя оператор сложения:

```python
>>> prefix + 'thon'
'Python'
```

### Индексация строк

Ещё, строки в Python поддерживают индексацию, то есть определяют для каждого символа внутри определённый индекс, по которому затем можно обратиться к символу используя специальный синтаксис. Индексация в Python начинается с `0`. 

Также Python не имеет специального типа данных для символов (как например тип `char` в некоторых языках). Каждый символ в Python — это просто строка длинной в один символ. 

```python
>>> word = 'Python'
>>> word[0]  # символ на позиции 0
'P'
>>> word[5]  # символ на позиции 5
'n'
```

Индексы также могут быть отрицательными, что позволяет обращаться к символам в порядке с права на лево:

```python
>>> word[-1]  # последний символ в строке
'n'
>>> word[-2]  # второй с конца символ в строке
'o'
>>> word[-6]
'P'
```

> Поскольку значения `-0` и `0` равны, отрицательные индексы начинаются с `-1`, а не с `-0`.

Python также позволяет формировать срезы строк, то есть возвращать их подстроки, используя пару индексов начала и конца среза. 

```python
>>> word[0:2]  # срез символов с первго включительно до третьего не включительно
'Py'
>>> word[2:5]  # срез символов со второго включительно до пятого невключительно
'tho'
```

Также срезы позволяют и вовсе опускать индексы, в этом случае подстрока будет сформирована на основе значений по умолчанию. Для начала среза значение по умолчанию равно `0`, для конца среза длине исходной строки.

```python
>>> word[:2]   # срез символов от начала строки до второго невключительно
'Py'
>>> word[4:]   # срез символов с четвёртого включительно до конца строки
'on'
>>> word[-2:]  # срез символов со второго с конца включительно до конца строки
'on'
```

Интересный факт — начало среза всегда включается в итоговую подстроку, а конец никогда не в неё включается. Такое поведение гарантирует, что  `s[:i] + s[i:]` всегда равно `s`:

```python
>>> word[:2] + word[2:]
'Python'
>>> word[:4] + word[4:]
'Python'
```

В Python не возможно обратиться к символу по индексу за пределами строки, это всегда приводит к ошибке.

```python
>>> word[42]  # строка состоит только из шести символов
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: string index out of range
```

Однако это правило совершенно не применимо ко срезам. В Python срез может быть определён в абсолютно любом диапазоне, даже полностью выходящем за рамки исходной строки:

```python
>>> word[4:42]
'on'
>>> word[42:]
''
```

Содержимое строк в Python невозможно изменить, поскольку они [[#^bd5d7c|иммутабельны]]. Любая попытка присвоить новое значение символу в строке по его индексу приведёт к ошибке:

```python
>>> word[0] = 'J'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
>>> word[2:] = 'py'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
```

Для того, чтобы изменить исходную строку нам необходимо создать новую на её основе, например используя срез:

```python
>>> 'J' + word[1:]
'Jython'
>>> word[:2] + 'py'
'Pypy'
```

А для определения длинны строк Python предоставляет встроенную функцию `len()`:

```python
>>> s = 'supercalifragilisticexpialidocious'
>>> len(s)
34
```

## Список источников

- [An Informal Introduction to Python (python.org)](https://docs.python.org/3/tutorial/introduction.html)